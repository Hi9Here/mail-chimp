<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../gold-email-input/gold-email-input.html">
<!--
  `<mail-chimp></mail-chimp>` mail-chimp
  @demo demo.html
-->
<dom-module id="mail-chimp">
  <template>
    <style>:host {display:inline-block;background:#fff}</style>
    <form action="[[formAction]]" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <gold-email-input id=email on-blur=validate error-message="Please enter a valid email" required label="email" value="{{mail}}" invalid="{{inv}}" type="email"></gold-email-input>
    <input type="email" hidden value="[[mail]]" name="EMAIL">
    <div style="margin-top:10px">
    <paper-button disabled="[[inv]]" raised="[[mail]]" on-tap="_submit"> Sign Up </paper-button></div>
    </form>
  </template>
</dom-module>
<script>
  Polymer({
    is: "mail-chimp",
    _submit: function(){
      this.$['mc-embedded-subscribe-form'].submit()
    },
    validate: function(){
      this.mail = this.mail.trim()
      this.$.email.validate()
    },
  })
</script>
